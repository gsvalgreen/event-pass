# Business Rules & Domain Logic

## 1. User Profiles & Permissions
- **ADMIN**:
  - Can create and manage events.
  - Can view the dashboard (Admin Panel).
  - Can perform "Check-in" of users (scan tickets).
- **USER**:
  - Can sign up and login.
  - Can view available events.
  - Can issue tickets (register for events).
  - Can view their own tickets.

## 2. Registration Rules (Ticket Issuance)
- **Uniqueness**: A User can register for a specific Event ONCE.
  - *Implementation*: Unique Constraint in the database `(userId, eventId)`.
- **Atomicity**: Registration must be atomic.
  - *Flow*: `Start Transaction` -> `Check Available Spots` -> `Insert Ticket` -> `Decrement Spots` -> `Commit`.
  - If seats < 1, throw error and Rollback.
- **Identifier**: The QR Code generation must be based on the unique Ticket ID or signed hash.
- **QR Code format**: The QR Code must be in JWT format and signed with a secret key. The JWT must contain the following information:
  - `ticketId`
  - `userId`
  - `eventId`
  - `iat` / `exp` (Standard JWT Claims)

## 3. Validation Rules (Check-in)
- **Duplicate Entry**: The system must block re-entry.
  - If a Ticket is already marked `checkedInAt != null`, return error "Ticket already checked in".
- **Authenticity**:
  - The system must validate that the QR Code was generated by this system (via signature/hash validation).

## 4. Financial
- **Cost**: All events are **100% Free**.
- **Payment Gateway**: None.
